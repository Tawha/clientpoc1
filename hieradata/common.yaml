---
# This is the yaml file common to all nodes
dnsclient::nameservers:
  - 8.8.8.8
  - 8.8.4.4
  - 208.67.222.222
  - 208.67.220.220
pam::pam_auth_lines:
  - auth required   pam_env.so
  - auth sufficient pam_unix.so nullok try_first_pass
  - auth requisite  pam_succeed_if.so uid >= 500 quiet
  - auth sufficient pam_ldap.so use_first_pass
  - auth required   pam_deny.so
  - auth required   pam_tally2.so onerr=fail deny=6 unlock_time=1800
pam::pam_account_lines:
  - account required   pam_unix.so broken_shadow
  - account sufficient pam_localuser.so
  - account sufficient pam_succeed_if.so uid < 500 quiet
  - account [default=bad success=ok user_unknown=ignore] pam_ldap.so
  - account required   pam_permit.so
pam::pam_password_lines:
  - password requisite  pam_cracklib.so retry=6 difok=3 minlen=7 ucredit=-1 lcredit=-1 dcredit=-1 ocredit=-1
  - password sufficient pam_unix.so md5 shadow nullok try_first_pass use_authtok remember=4
  - password sufficient pam_ldap.so use_authtok
  - password required   pam_deny.so
pam::pam_session_lines:
  - session optional pam_keyinit.so revoke
  - session required pam_limits.so
  - session [success=1 default=ignore] pam_succeed_if.so service in crond quiet use_uid
  - session required pam_unix.so
  - session optional pam_ldap.so
ssh::sshd_config_port: '2746'
ssh::sshd_x11_forwarding: 'no'
ssh::sshd_config_print_motd: 'no'
ssh::sshd_allow_tcp_forwarding: 'no'
ssh::sshd_sshd_config_loglevel: 'DEBUG'
ssh::sshd_config_hostkey:
  - '/etc/ssh/ssh_host_rsa_key'
  - '/etc/ssh/ssh_host_dsa_key'
ssh::sshd_config_serverkeybits: '768'
ssh::sshd_config_strictmodes: 'yes'
ssh::sshd_config_login_grace_time: '600'
ssh::sshd_config_password_authentication: 'yes'
ssh::sshd_pamauthenticationviakbdint: 'yes'
ssh::sshd_root_login: 'no'
ssh::sshd_config_subsystem_sftp: 'internal-sftp'
ssh::sshd_ignorerhosts: 'yes'
ssh::sshd_config_banner: '/etc/issue'
